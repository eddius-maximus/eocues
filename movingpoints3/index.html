<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Trapezoid Calculator with D3.js</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>
  <label for="length">Length of the Dowel (inches):</label>
  <input type="number" id="length" step="0.01" value="12"><br>

  <label for="topDiameter">Top Diameter of the Dowel (inches):</label>
  <input type="number" id="topDiameter" step="0.01" value="1"><br>

  <label for="bottomDiameter">Bottom Diameter of the Dowel (inches):</label>
  <input type="number" id="bottomDiameter" step="0.01" value="1.2"><br>

  <svg id="svg" width="400" height="200"></svg>

  <script>
    // Get the input elements
    let lengthInput = document.getElementById('length');
    let topDiameterInput = document.getElementById('topDiameter');
    let bottomDiameterInput = document.getElementById('bottomDiameter');

    // Get the SVG element
    let svg = d3.select("#svg");

    // Attach event listeners to update the trapezoid when inputs change
    lengthInput.addEventListener('input', updateTrapezoid);
    topDiameterInput.addEventListener('input', updateTrapezoid);
    bottomDiameterInput.addEventListener('input', updateTrapezoid);

    function updateTrapezoid() {
      let length = parseFloat(lengthInput.value);
      let topDiameter = parseFloat(topDiameterInput.value);
      let bottomDiameter = parseFloat(bottomDiameterInput.value);

      // Calculate the coordinates of the trapezoid vertices
      let topWidth = topDiameter / 2;
      let bottomWidth = bottomDiameter / 2;
      let height = 100;

      let points = [
        { x: length / 2 - topWidth, y: 200 - height },
        { x: length / 2 + topWidth, y: 200 - height },
        { x: length / 2 + bottomWidth, y: 200 },
        { x: length / 2 - bottomWidth, y: 200 }
      ];

      // Update or create the trapezoid shape
      let trapezoid = svg.selectAll("polygon")
        .data([points])
        .join("polygon")
        .attr("points", d => d.map(p => [p.x, p.y].join(",")).join(" "));

      // Set the styling properties of the trapezoid
      trapezoid.attr("fill", "none")
        .attr("stroke", "red")
        .attr("stroke-width", 2);
    }
  </script>
</body>

</html>
